<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iu Nh·∫≠t Quy</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            overflow: hidden;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 25%, #7e22ce 50%, #ec4899 75%, #fbbf24 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            font-family: 'Arial', sans-serif;
            height: 100vh;
            width: 100vw;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .container {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .star {
            position: absolute;
            width: 3px;
            height: 3px;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
            box-shadow: 0 0 10px rgba(255,255,255,0.8);
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.5); }
        }

        .crane {
            position: absolute;
            font-size: 40px;
            transition: all 0.5s ease;
            filter: drop-shadow(0 0 15px rgba(255,255,255,0.8));
        }

        .crane.flying {
            animation: fly 15s linear infinite;
        }

        .heart-emoji {
            position: absolute;
            font-size: 32px;
            transition: all 0.5s ease;
            filter: drop-shadow(0 0 20px rgba(255,105,180,0.9));
        }

        .heart-emoji.flying {
            animation: fly 18s linear infinite, heartbeat 1.5s ease-in-out infinite;
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .text {
            position: absolute;
            font-size: 32px;
            font-weight: bold;
            background: linear-gradient(45deg, #ff69b4, #ff1493, #ff69b4, #ffc0cb);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 3s ease infinite;
            filter: drop-shadow(0 0 20px rgba(255,105,180,0.6));
            white-space: nowrap;
            transition: all 0.5s ease;
            pointer-events: none;
        }

        .text.flying {
            animation: flyToScreen 8s ease-out forwards, shimmer 3s ease infinite;
        }

        @keyframes shimmer {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @keyframes fly {
            0% {
                left: -150px;
                transform: translateY(0) rotate(-5deg);
                opacity: 0;
            }
            5% { opacity: 1; }
            25% { transform: translateY(-80px) rotate(5deg); }
            50% { transform: translateY(-40px) rotate(-3deg); }
            75% { transform: translateY(-100px) rotate(8deg); }
            95% { opacity: 1; }
            100% {
                left: 110%;
                transform: translateY(-20px) rotate(-5deg);
                opacity: 0;
            }
        }

        @keyframes flyToScreen {
            0% {
                opacity: 0;
                transform: translate(-200px, 0) scale(0.5);
            }
            20% {
                opacity: 1;
            }
            100% {
                opacity: 1;
                transform: translate(0, 0) scale(1);
            }
        }

        .sparkle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: radial-gradient(circle, #fff 0%, transparent 70%);
            border-radius: 50%;
            animation: sparkleFloat 4s linear infinite;
            pointer-events: none;
        }

        @keyframes sparkleFloat {
            0% {
                transform: translateY(100vh) scale(0);
                opacity: 0;
            }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% {
                transform: translateY(-100px) scale(1.5);
                opacity: 0;
            }
        }

        .particle-heart {
            position: absolute;
            font-size: 16px;
            animation: floatUp 6s linear infinite;
            opacity: 0.6;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% { opacity: 0.6; }
            90% { opacity: 0.6; }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        .music-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #ff69b4, #ff1493);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255,105,180,0.5);
            z-index: 1000;
            transition: transform 0.3s ease;
        }

        .music-btn:hover {
            transform: scale(1.1);
        }

        .music-btn.playing {
            animation: pulse 1s ease infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 4px 15px rgba(255,105,180,0.5); }
            50% { box-shadow: 0 4px 30px rgba(255,105,180,0.9); }
        }

        @media (max-width: 768px) {
            .crane { font-size: 34px; }
            .heart-emoji { font-size: 28px; }
            .text { font-size: 26px; }
            .music-btn { width: 50px; height: 50px; font-size: 20px; }
        }

        @media (max-width: 480px) {
            .crane { font-size: 28px; }
            .heart-emoji { font-size: 24px; }
            .text { font-size: 22px; }
        }
    </style>
</head>
<body>
    <div class="container" id="container"></div>
    <button class="music-btn playing" id="musicBtn">üé∂</button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <script>
        const container = document.getElementById('container');
        const musicBtn = document.getElementById('musicBtn');
        const craneEmoji = 'üïäÔ∏è';
        const heartEmoji = '‚ù§Ô∏è';
        const text = 'iu Nh·∫≠t Quy';
        
        let isPlaying = false;
        let synth, loop;
        let textElements = [];

        // T·ª± ƒë·ªông ph√°t nh·∫°c khi load trang
        async function autoPlayMusic() {
            try {
                await Tone.start();
                initMusic();
                Tone.Transport.start();
                loop.start(0);
                isPlaying = true;
                musicBtn.classList.add('playing');
                musicBtn.textContent = 'üé∂';
            } catch (e) {
                console.log('Autoplay blocked, user needs to click');
            }
        }

        function initMusic() {
            synth = new Tone.PolySynth(Tone.Synth, {
                oscillator: { type: 'sine' },
                envelope: {
                    attack: 0.5,
                    decay: 0.3,
                    sustain: 0.4,
                    release: 1.5
                }
            }).toDestination();
            
            synth.volume.value = -10;

            const melody = [
                ['C4', 'E4', 'G4'], ['D4', 'F4', 'A4'], 
                ['E4', 'G4', 'B4'], ['C4', 'E4', 'G4'],
                ['A3', 'C4', 'E4'], ['G3', 'B3', 'D4'],
                ['F3', 'A3', 'C4'], ['E3', 'G3', 'B3']
            ];
            
            let index = 0;
            loop = new Tone.Loop((time) => {
                synth.triggerAttackRelease(melody[index % melody.length], '2n', time);
                index++;
            }, '1n');
        }

        musicBtn.addEventListener('click', async () => {
            if (!synth) {
                await Tone.start();
                initMusic();
            }
            
            if (isPlaying) {
                Tone.Transport.stop();
                loop.stop();
                musicBtn.classList.remove('playing');
                musicBtn.textContent = 'üéµ';
            } else {
                Tone.Transport.start();
                loop.start(0);
                musicBtn.classList.add('playing');
                musicBtn.textContent = 'üé∂';
            }
            isPlaying = !isPlaying;
        });

        function getHeartPositions(count) {
            const positions = [];
            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 2;
            const size = Math.min(window.innerWidth, window.innerHeight) * 0.15;
            
            for (let i = 0; i < count; i++) {
                const t = (i / count) * Math.PI * 2;
                const x = centerX + size * 16 * Math.pow(Math.sin(t), 3);
                const y = centerY - size * (13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
                positions.push({ x, y });
            }
            return positions;
        }

        function createStars() {
            for (let i = 0; i < 50; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                container.appendChild(star);
            }
        }

        function createSparkles() {
            setInterval(() => {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.left = Math.random() * 100 + '%';
                sparkle.style.animationDelay = Math.random() * 2 + 's';
                container.appendChild(sparkle);
                setTimeout(() => sparkle.remove(), 4000);
            }, 300);
        }

        function createFloatingHearts() {
            setInterval(() => {
                const heart = document.createElement('div');
                heart.className = 'particle-heart';
                heart.textContent = 'üíï';
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDelay = Math.random() * 2 + 's';
                heart.style.fontSize = (12 + Math.random() * 8) + 'px';
                container.appendChild(heart);
                setTimeout(() => heart.remove(), 6000);
            }, 800);
        }

        // T·∫°o ch·ªØ bay v√† t·ª• h·ªçp ƒë·∫ßy m√†n h√¨nh
        function createFlyingTexts() {
            const rows = Math.ceil(window.innerHeight / 80);
            const cols = Math.ceil(window.innerWidth / 200);
            
            for (let row = 0; row < rows; row++) {
                for (let col = 0; col < cols; col++) {
                    setTimeout(() => {
                        const txt = document.createElement('div');
                        txt.className = 'text flying';
                        txt.textContent = text;
                        
                        const finalX = col * 200 + Math.random() * 50;
                        const finalY = row * 80 + Math.random() * 30;
                        
                        txt.style.left = finalX + 'px';
                        txt.style.top = finalY + 'px';
                        
                        container.appendChild(txt);
                        textElements.push(txt);
                    }, (row * cols + col) * 100);
                }
            }
        }

        function initHeartFormation() {
            const cranePositions = getHeartPositions(12);
            const heartPositions = getHeartPositions(8);

            cranePositions.forEach((pos, i) => {
                const crane = document.createElement('div');
                crane.className = 'crane';
                crane.textContent = craneEmoji;
                crane.style.left = pos.x + 'px';
                crane.style.top = pos.y + 'px';
                crane.style.transform = 'translate(-50%, -50%)';
                container.appendChild(crane);
                
                setTimeout(() => {
                    crane.classList.add('flying');
                    crane.style.top = (5 + i * 7) + '%';
                    crane.style.left = '-150px';
                    crane.style.transform = '';
                }, 3000);
            });

            heartPositions.forEach((pos, i) => {
                const heart = document.createElement('div');
                heart.className = 'heart-emoji';
                heart.textContent = heartEmoji;
                heart.style.left = pos.x + 'px';
                heart.style.top = pos.y + 'px';
                heart.style.transform = 'translate(-50%, -50%)';
                container.appendChild(heart);
                
                setTimeout(() => {
                    heart.classList.add('flying');
                    heart.style.top = (10 + i * 10) + '%';
                    heart.style.left = '-150px';
                    heart.style.transform = '';
                }, 3000);
            });

            // B·∫Øt ƒë·∫ßu t·∫°o ch·ªØ bay v√†o sau 3.5s
            setTimeout(() => {
                createFlyingTexts();
            }, 3500);
        }

        // Kh·ªüi t·∫°o
        createStars();
        createSparkles();
        createFloatingHearts();
        initHeartFormation();
        autoPlayMusic();

        // Th√™m nhi·ªÅu h·∫°c bay li√™n t·ª•c
        setInterval(() => {
            const crane = document.createElement('div');
            crane.className = 'crane flying';
            crane.textContent = craneEmoji;
            crane.style.top = (Math.random() * 80 + 10) + '%';
            crane.style.left = '-150px';
            container.appendChild(crane);
        }, 2000);

        // Th√™m tr√°i tim bay
        setInterval(() => {
            const heart = document.createElement('div');
            heart.className = 'heart-emoji flying';
            heart.textContent = heartEmoji;
            heart.style.top = (Math.random() * 80 + 10) + '%';
            heart.style.left = '-150px';
            container.appendChild(heart);
        }, 4000);

        setInterval(() => {
            const elements = Array.from(container.children);
            const toRemove = elements.filter(el => 
                !el.className.includes('star') && 
                !el.className.includes('music') &&
                !textElements.includes(el)
            );
            
            if (toRemove.length > 50) {
                toRemove.slice(0, 20).forEach(el => el.remove());
            }
        }, 5000);
    </script>
</body>
</html>